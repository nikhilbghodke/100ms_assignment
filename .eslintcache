[{"/home/nikhil/react/100ms/src/index.js":"1","/home/nikhil/react/100ms/src/reportWebVitals.js":"2","/home/nikhil/react/100ms/src/App.js":"3","/home/nikhil/react/100ms/src/config.js":"4","/home/nikhil/react/100ms/src/layouts/Conference.js":"5","/home/nikhil/react/100ms/src/layouts/CreateRoom.js":"6","/home/nikhil/react/100ms/src/layouts/JoinRoom.js":"7"},{"size":500,"mtime":1608566679917,"results":"8","hashOfConfig":"9"},{"size":362,"mtime":1608566679917,"results":"10","hashOfConfig":"9"},{"size":4753,"mtime":1608730586829,"results":"11","hashOfConfig":"9"},{"size":84,"mtime":1608667466083,"results":"12","hashOfConfig":"9"},{"size":3211,"mtime":1608733754993,"results":"13","hashOfConfig":"9"},{"size":3834,"mtime":1608725044926,"results":"14","hashOfConfig":"9"},{"size":3881,"mtime":1608730094215,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"1qt1o30",{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"21","messages":"22","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23","usedDeprecatedRules":"18"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"31"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"18"},"/home/nikhil/react/100ms/src/index.js",[],["35","36"],"/home/nikhil/react/100ms/src/reportWebVitals.js",[],"/home/nikhil/react/100ms/src/App.js",["37","38","39","40"],"import React,{Component} from 'react';\nimport CreateRoom from \"./layouts/CreateRoom\"\nimport JoinRoom from \"./layouts/JoinRoom\"\nimport Conference from \"./layouts/Conference\"\nimport {API_URL} from \"./config\"\nimport { HMSClient, HMSPeer, HMSClientConfig } from '@100mslive/hmsvideo-web';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  Link,\n  useRouteMatch,\n  useParams\n} from \"react-router-dom\";\n\nasync function getToken({ room_id, user_name, role = 'guest', env }) {\n  const endpoint = `${API_URL}?api=token`;\n  const { token } = await fetch(endpoint, {\n    method: 'POST',\n    body: JSON.stringify({ room_id, user_name, env, role }),\n  })\n    .then(response => response.json())\n    .catch(err => console.log('Error client token: ', err));\n  return token;\n}\n\nclass App extends Component{\n  constructor(){\n    super()\n    this.state={\n      client:null,\n      roomId:null\n    }\n  }\n\n  _createClient = async ( userName, roomId, role=\"guest\" ) => {\n    let url = \"wss://prod-in.100ms.live\"\n    let authToken = await getToken({\n      room_id: roomId,\n      user_name: userName,\n      role,\n    });\n\n    console.log(`%c[APP] TOKEN IS: ${authToken}`, 'color: orange');\n\n    try {\n\n      let peer = new HMSPeer(userName, authToken);\n      let config = new HMSClientConfig({\n        endpoint: url,\n      });\n\n      let client= new HMSClient(peer, config);\n      console.log(client)\n      this.setState({...this.state,\"client\":client,\"roomId\":roomId})\n      return client\n\n    } catch (err) {\n      console.error('ERROR: ', err);\n      alert('Invalid token');\n    }\n  }\n\n  _createRoom = async (roomName) => {\n    const endpoint = `${API_URL}?api=room`;\n    console.log('Create Room endpoint', endpoint);\n   \n    const response = await fetch(endpoint, {\n      method: 'POST',\n      body: JSON.stringify({\n        room_name: roomName,\n        recording_info: {\n          enabled: false,\n        },\n      }),\n    }).catch(err => {\n      console.log('Error', err);\n    });\n\n    console.log('Response: ', response);\n    if (response.status != 200) {\n      const data = await response.json();\n      alert(data.msg)\n    } else {\n      const roomEntry = await response.json();\n      console.log('response:', roomEntry);\n      \n      return roomEntry.id;\n      \n    }\n  }\n\n  _createRoomAndClient=async (roomName,userName, role=\"guest\")=>{\n      let roomId= await this._createRoom(roomName)\n      await this._createClient(userName,roomId,role)\n\n  }\n\n  componentDidMount=async ()=>{\n    // try{\n    //   let roomId= await this._createRoom(\"great\")\n    //   let client = await this._createClient(\"nikhil\",roomId, \"host\")\n    //   console.log(client)\n    //   await client.connect()\n    //   console.log(\"Client connescted\")\n    //   client.on('connect',async () => {\n    //     try {\n    //         await client.join(roomId);\n    //         const localStream = await client.getLocalStream({\n    //           resolution: \"vga\",\n    //           bitrate: 256,\n    //           codec: \"VP8\",\n    //           frameRate: 20,\n    //           shouldPublishAudio:true,\n    //           shouldPublishVideo:true\n    //         });\n    //         // console.log(localStream)\n            \n    //         // await client.publish(localStream, roomId);\n            \n    //     } catch(err) {\n    //         // Handle error\n    //     }\n    //   });\n    //   client.on('disconnect', () => {});\n\n    //   client.on('disconnect', () => {});\n\n    //   client.on('peer-join', (room, peer) => {\n    //       // Show a notification or toast message in the UI\n    //   });\n\n    //   client.on('peer-leave', (room, peer) => {\n    //       // Show a notification or toast message in the UI\n    //   });\n\n    //   client.on('stream-add', (room,  streamInfo) => {\n    //       // subscribe to the stream if needed\n    //   });\n\n    //   client.on('stream-remove', (room, streamInfo) => {\n    //       // Remove remote stream if needed\n    //   });\n\n    //   client.on('broadcast', (room, peer ,message) => {\n    //       // Show a notification or update chat UI\n    //   });\n      \n    // }\n    // catch(e){\n    //   console.log(e)\n    // }\n  }\n\n  render(){\n    return(\n      <Router>\n        <Switch>\n        <Route exact path=\"/createRoom\" render={(props)=>(\n          <CreateRoom createRoomAndClient={this._createRoomAndClient} {...props} />\n    )}>\n            \n        </Route>\n        <Route exact path=\"/joinRoom\" render={(props)=>(\n          <JoinRoom createClient={this._createClient} {...props} />\n    )}>\n            \n        </Route>\n        <Route exact path=\"/room\">\n            <Conference {...this.state} />\n        </Route>\n        <Route exact path=\"/\" render={() => (<Redirect to=\"/createRoom\" />)} />\n        </Switch>\n    </Router>)\n  }\n}\n\nexport default App;\n","/home/nikhil/react/100ms/src/config.js",[],"/home/nikhil/react/100ms/src/layouts/Conference.js",[],"/home/nikhil/react/100ms/src/layouts/CreateRoom.js",["41","42"],"import React,{Component} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\n\nimport { withStyles } from \"@material-ui/core/styles\";\n\nimport Container from '@material-ui/core/Container';\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\n        Your Website\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst styles = (theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(3),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n})\n\nclass CreateRoom extends Component {\n\n  constructor(props){\n    super(props)\n    console.log(props)\n    this.state={\n      username:\"\",\n      roomname:\"\"\n    }\n  }\n\n  \n  \n\n  render=()=>{\n    const { classes } = this.props;\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Create Room\n        </Typography>\n        <form className={classes.form} noValidate onSubmit={async (event)=>{\n          event.preventDefault();\n          let {username,roomname,role=\"host\"}= this.state\n          await this.props.createRoomAndClient(username,roomname,role)\n          this.props.history.push(\"/room\")\n        }}>\n          <Grid container spacing={2}>\n            \n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                required\n                fullWidth\n                id=\"roomName\"\n                label=\"Room Name\"\n                name=\"roomname\"\n                value={this.state.roomname}\n                onChange={(e)=>{\n                  this.setState({...this.state,\"roomname\":e.target.value})\n                }}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                required\n                fullWidth\n                name=\"username\"\n                label=\"Username\"\n            \n                id=\"username\"\n                value={this.state.username}\n                onChange={(e)=>{\n                  this.setState({...this.state,\"username\":e.target.value})\n                }}\n              />\n            </Grid>\n           \n          </Grid>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            Create Room\n          </Button>\n          <Grid container justify=\"flex-end\">\n            <Grid item>\n              <Link href=\"/#/joinRoom\" variant=\"body2\">\n                Join a Room\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={5}>\n        <Copyright />\n      </Box>\n    </Container>\n  );}\n}\nexport default withStyles(styles, { withTheme: true })(CreateRoom);",["43","44"],"/home/nikhil/react/100ms/src/layouts/JoinRoom.js",["45","46","47"],"import React,{Component} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\n\nimport { withStyles } from \"@material-ui/core/styles\";\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\n        Your Website\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst styles = (theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(3),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n})\nclass JoinRoom extends Component {\n    constructor(props){\n        super(props)\n        console.log(props)\n        this.state={\n          username:\"\",\n          roomid:\"\"\n        }\n      }\n  \n    render(){\n        const { classes } = this.props;\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Join Room\n        </Typography>\n        <form className={classes.form} noValidate  onSubmit={async (event)=>{\n          event.preventDefault();\n          let {username,roomid,role=\"guest\"}= this.state\n          await this.props.createClient(username,roomid,role)\n          this.props.history.push(`/room`)\n        }}>\n          <Grid container spacing={2}>\n          <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                required\n                fullWidth\n                name=\"roomid\"\n                label=\"Room Id\"\n                id=\"roomid\"\n                value={this.state.roomid}\n                onChange={(e)=>{\n                    this.setState({...this.state,\"roomid\":e.target.value})\n                  }}\n              />\n            </Grid>\n            \n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                required\n                fullWidth\n                name=\"username\"\n                label=\"Username\"\n                id=\"username\"\n                value={this.state.username}\n                onChange={(e)=>{\n                    this.setState({...this.state,\"username\":e.target.value})\n                  }}\n              />\n            </Grid>\n           \n          </Grid>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            Join Room\n          </Button>\n          <Grid container justify=\"flex-end\">\n            <Grid item>\n              <Link href=\"/#/createRoom\" variant=\"body2\">\n                Create a Room\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={5}>\n        <Copyright />\n      </Box>\n    </Container>\n  );}\n}\nexport default withStyles(styles, { withTheme: true })(JoinRoom);",{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","replacedBy":"51"},{"ruleId":"52","severity":1,"message":"53","line":12,"column":3,"nodeType":"54","messageId":"55","endLine":12,"endColumn":7},{"ruleId":"52","severity":1,"message":"56","line":13,"column":3,"nodeType":"54","messageId":"55","endLine":13,"endColumn":16},{"ruleId":"52","severity":1,"message":"57","line":14,"column":3,"nodeType":"54","messageId":"55","endLine":14,"endColumn":12},{"ruleId":"58","severity":1,"message":"59","line":82,"column":25,"nodeType":"60","messageId":"61","endLine":82,"endColumn":27},{"ruleId":"52","severity":1,"message":"62","line":6,"column":8,"nodeType":"54","messageId":"55","endLine":6,"endColumn":24},{"ruleId":"52","severity":1,"message":"63","line":7,"column":8,"nodeType":"54","messageId":"55","endLine":7,"endColumn":16},{"ruleId":"48","replacedBy":"64"},{"ruleId":"50","replacedBy":"65"},{"ruleId":"52","severity":1,"message":"62","line":6,"column":8,"nodeType":"54","messageId":"55","endLine":6,"endColumn":24},{"ruleId":"52","severity":1,"message":"63","line":7,"column":8,"nodeType":"54","messageId":"55","endLine":7,"endColumn":16},{"ruleId":"52","severity":1,"message":"66","line":13,"column":10,"nodeType":"54","messageId":"55","endLine":13,"endColumn":20},"no-native-reassign",["67"],"no-negated-in-lhs",["68"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","'useRouteMatch' is defined but never used.","'useParams' is defined but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","'FormControlLabel' is defined but never used.","'Checkbox' is defined but never used.",["67"],["68"],"'makeStyles' is defined but never used.","no-global-assign","no-unsafe-negation"]